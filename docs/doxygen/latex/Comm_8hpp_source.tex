\hypertarget{Comm_8hpp_source}{}\doxysection{Comm.\+hpp}
\label{Comm_8hpp_source}\index{/home/srvenkat/matvec-\/test/src/Comm.hpp@{/home/srvenkat/matvec-\/test/src/Comm.hpp}}
\mbox{\hyperlink{Comm_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#ifndef\ \_\_COMM\_HPP\_\_}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#define\ \_\_COMM\_HPP\_\_}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{shared_8hpp}{shared.hpp}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{utils_8hpp}{utils.hpp}}"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classComm}{Comm}}\ \{}
\DoxyCodeLine{00017\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00018\ \ \ \ \ MPI\_Comm\ global\_comm;\ }
\DoxyCodeLine{00019\ \ \ \ \ MPI\_Comm\ row\_comm;\ }
\DoxyCodeLine{00020\ \ \ \ \ MPI\_Comm\ col\_comm;\ }
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{int}\ row\_color;\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordtype}{int}\ col\_color;\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{int}\ world\_rank;\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{int}\ world\_size;\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{int}\ device;\ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{int}\ proc\_rows;\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordtype}{int}\ proc\_cols;\ }
\DoxyCodeLine{00028\ \ \ \ \ ncclComm\_t\ gpu\_row\_comm;\ }
\DoxyCodeLine{00029\ \ \ \ \ ncclComm\_t\ gpu\_col\_comm;\ }
\DoxyCodeLine{00030\ \ \ \ \ cudaStream\_t\ s;\ }
\DoxyCodeLine{00031\ \ \ \ \ cublasHandle\_t\ cublasHandle;\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classComm}{Comm}}(MPI\_Comm\ comm,\ \textcolor{keywordtype}{int}\ proc\_rows,\ \textcolor{keywordtype}{int}\ proc\_cols);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classComm_a7c661070ca791f994c3d0c7dc5be9f8a}{Comm}}(\mbox{\hyperlink{classComm}{Comm}}\&\ comm)}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ :\ global\_comm(comm.global\_comm)}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ ,\ proc\_rows(comm.proc\_rows)}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ ,\ proc\_cols(comm.proc\_cols)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ ,\ world\_rank(comm.world\_rank)}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ ,\ world\_size(comm.world\_size)}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ ,\ row\_color(comm.row\_color)}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ ,\ col\_color(comm.col\_color)}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ ,\ device(comm.device)}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ ,\ row\_comm(comm.row\_comm)}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ ,\ col\_comm(comm.col\_comm)}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ ,\ gpu\_row\_comm(comm.gpu\_row\_comm)}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ ,\ gpu\_col\_comm(comm.gpu\_col\_comm)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ ,\ s(comm.s)}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ ,\ cublasHandle(comm.cublasHandle)}
\DoxyCodeLine{00061\ \ \ \ \ \{}
\DoxyCodeLine{00062\ \ \ \ \ \}\ \textcolor{comment}{//\ Copy\ constructor}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classComm_a00134417af6aae9bf911d3ec7b8c049b}{\string~Comm}}();}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00073\ \ \ \ \ ncclComm\_t\ \mbox{\hyperlink{classComm_a2170a74851ad06b4ea387b5114a2164c}{get\_gpu\_row\_comm}}()\ \{\ \textcolor{keywordflow}{return}\ gpu\_row\_comm;\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00079\ \ \ \ \ ncclComm\_t\ \mbox{\hyperlink{classComm_a729e5f5243a1ae259a3711e882ac5431}{get\_gpu\_col\_comm}}()\ \{\ \textcolor{keywordflow}{return}\ gpu\_col\_comm;\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_a638a2b980344476d11b02dcc39c389ff}{get\_device}}()\ \{\ \textcolor{keywordflow}{return}\ device;\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00091\ \ \ \ \ cudaStream\_t\ \mbox{\hyperlink{classComm_a437d58a124a2b5d8ebc48bbcf197b835}{get\_stream}}()\ \{\ \textcolor{keywordflow}{return}\ s;\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00097\ \ \ \ \ MPI\_Comm\ \mbox{\hyperlink{classComm_a47823fb9cdcb6b08090483868932342a}{get\_row\_comm}}()\ \{\ \textcolor{keywordflow}{return}\ row\_comm;\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00103\ \ \ \ \ MPI\_Comm\ \mbox{\hyperlink{classComm_a63244bd7ffcfcc0363d4d320ad2a11a0}{get\_col\_comm}}()\ \{\ \textcolor{keywordflow}{return}\ col\_comm;\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00109\ \ \ \ \ MPI\_Comm\ \mbox{\hyperlink{classComm_a48906692869fdd7da314f4390e0ea3d1}{get\_global\_comm}}()\ \{\ \textcolor{keywordflow}{return}\ global\_comm;\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_a905fd1890b9b3789df5fc285ff4d77ba}{get\_row\_color}}()\ \{\ \textcolor{keywordflow}{return}\ row\_color;\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_ac011085efdd47ebbf906710cd761aa8d}{get\_col\_color}}()\ \{\ \textcolor{keywordflow}{return}\ col\_color;\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_aa47c546440771ff80338d51bf41f13f7}{get\_world\_rank}}()\ \{\ \textcolor{keywordflow}{return}\ world\_rank;\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_a9e4deddf9821b5f5a3f42012215e5e2a}{get\_world\_size}}()\ \{\ \textcolor{keywordflow}{return}\ world\_size;\ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_aac93d385a703988ee17fa2abb53fd86c}{get\_proc\_rows}}()\ \{\ \textcolor{keywordflow}{return}\ proc\_rows;\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComm_ada605b13c437a9d8aac6e052835b7a2d}{get\_proc\_cols}}()\ \{\ \textcolor{keywordflow}{return}\ proc\_cols;\ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \ \ \ \ cublasHandle\_t\ \mbox{\hyperlink{classComm_af49c51d6d8dbacf8110fafeb3244e05f}{get\_cublasHandle}}()\ \{\ \textcolor{keywordflow}{return}\ cublasHandle;\ \}}
\DoxyCodeLine{00152\ \};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
